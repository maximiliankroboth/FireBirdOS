!to "FireBirdOS.img", plain
!cpu 65EL02
!src "memory.a"
!src "macros.a"

*=0x500
SEC
XCE
	
+initmmu
LDA #$0D
STA CR
LDA #$0A
STA LF
LDA 'H'
JSR .put
STP

.put
!zone {
+enter
LDX CURRENT_SCREEN_X
LDY CURRENT_SCREEN_Y
CMP CR
BEQ .newline
CMP LF
BEQ .newline

STY $300
STA $310, X
INX
JMP .exit
.newline
INY
LDX #$0
.exit
STX CURRENT_SCREEN_X
STY CURRENT_SCREEN_Y
+update_cursor
+leave
}
RTS

!fi 128, $00